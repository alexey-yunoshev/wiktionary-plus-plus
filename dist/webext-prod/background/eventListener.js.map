{"mappings":"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","sources":["src/extension/anki/actions.ts","src/extension/anki/addNote.ts","src/extension/anki/invokeAction.ts","node_modules/quick-format-unescaped/index.js","node_modules/pino/browser.js","src/extension/logger.ts","src/extension/messages.ts","src/extension/background/eventListener.ts"],"sourcesContent":["export enum ActionType {\r\n  AddNote = \"addNote\",\r\n}\r\n\r\n","import { invokeAction } from \"./invokeAction\";\r\nimport { ActionType } from \"./actions\";\r\n\r\n/**\r\n * @see __addNote__ in [docs](https://foosoft.net/projects/anki-connect/#note-actions)\r\n */\r\nexport interface AddNoteParams {\r\n  note: {\r\n    deckName: string;\r\n    modelName: \"Basic\";\r\n    fields: {\r\n      Front: string;\r\n      Back: string;\r\n    };\r\n    options?: {\r\n      allowDuplicate: false;\r\n      duplicateScope: \"deck\";\r\n      duplicateScopeOptions: {\r\n        deckName?: string | null;\r\n        checkChildren?: boolean;\r\n        checkAllModels: boolean;\r\n      };\r\n    };\r\n    tags?: string[];\r\n  };\r\n}\r\n\r\nexport interface BasicAddNoteParams {\r\n  deckName: AddNoteParams[\"note\"][\"deckName\"],\r\n  front: AddNoteParams[\"note\"][\"fields\"][\"Front\"],\r\n  back: AddNoteParams[\"note\"][\"fields\"][\"Back\"]\r\n}\r\n\r\nexport function getDefaultAddNoteParams({\r\n  front,\r\n  back,\r\n  deckName,\r\n}: BasicAddNoteParams): AddNoteParams {\r\n  return {\r\n    note: {\r\n      deckName,\r\n      modelName: \"Basic\",\r\n      fields: {\r\n        Front: front,\r\n        Back: back,\r\n      },\r\n      options: {\r\n        allowDuplicate: false,\r\n        duplicateScope: \"deck\",\r\n        duplicateScopeOptions: {\r\n          deckName: null,\r\n          checkChildren: false,\r\n          checkAllModels: false,\r\n        },\r\n      },\r\n      tags: [],\r\n    },\r\n  };\r\n}\r\n\r\nexport function addNote(params: BasicAddNoteParams) {\r\n  return invokeAction({\r\n    action: ActionType.AddNote,\r\n    params: getDefaultAddNoteParams(params),\r\n  });\r\n}\r\n","import { ActionType } from \"./actions\";\r\n\r\nexport interface InvokeActionParams {\r\n  action: ActionType.AddNote,\r\n  params: object,\r\n}\r\n\r\nexport function invokeAction(params: InvokeActionParams) {\r\n  const body = JSON.stringify({\r\n    ...params,\r\n    version: 6,\r\n  });\r\n    \r\n  return fetch(\"http://127.0.0.1:8765\", {\r\n    method: \"POST\",\r\n    body,\r\n  });\r\n}","'use strict'\nfunction tryStringify (o) {\n  try { return JSON.stringify(o) } catch(e) { return '\"[Circular]\"' }\n}\n\nmodule.exports = format\n\nfunction format(f, args, opts) {\n  var ss = (opts && opts.stringify) || tryStringify\n  var offset = 1\n  if (typeof f === 'object' && f !== null) {\n    var len = args.length + offset\n    if (len === 1) return f\n    var objects = new Array(len)\n    objects[0] = ss(f)\n    for (var index = 1; index < len; index++) {\n      objects[index] = ss(args[index])\n    }\n    return objects.join(' ')\n  }\n  if (typeof f !== 'string') {\n    return f\n  }\n  var argLen = args.length\n  if (argLen === 0) return f\n  var str = ''\n  var a = 1 - offset\n  var lastPos = -1\n  var flen = (f && f.length) || 0\n  for (var i = 0; i < flen;) {\n    if (f.charCodeAt(i) === 37 && i + 1 < flen) {\n      lastPos = lastPos > -1 ? lastPos : 0\n      switch (f.charCodeAt(i + 1)) {\n        case 100: // 'd'\n        case 102: // 'f'\n          if (a >= argLen)\n            break\n          if (args[a] == null)  break\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          str += Number(args[a])\n          lastPos = i + 2\n          i++\n          break\n        case 105: // 'i'\n          if (a >= argLen)\n            break\n          if (args[a] == null)  break\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          str += Math.floor(Number(args[a]))\n          lastPos = i + 2\n          i++\n          break\n        case 79: // 'O'\n        case 111: // 'o'\n        case 106: // 'j'\n          if (a >= argLen)\n            break\n          if (args[a] === undefined) break\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          var type = typeof args[a]\n          if (type === 'string') {\n            str += '\\'' + args[a] + '\\''\n            lastPos = i + 2\n            i++\n            break\n          }\n          if (type === 'function') {\n            str += args[a].name || '<anonymous>'\n            lastPos = i + 2\n            i++\n            break\n          }\n          str += ss(args[a])\n          lastPos = i + 2\n          i++\n          break\n        case 115: // 's'\n          if (a >= argLen)\n            break\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          str += String(args[a])\n          lastPos = i + 2\n          i++\n          break\n        case 37: // '%'\n          if (lastPos < i)\n            str += f.slice(lastPos, i)\n          str += '%'\n          lastPos = i + 2\n          i++\n          a--\n          break\n      }\n      ++a\n    }\n    ++i\n  }\n  if (lastPos === -1)\n    return f\n  else if (lastPos < flen) {\n    str += f.slice(lastPos)\n  }\n\n  return str\n}\n","'use strict'\n\nconst format = require('quick-format-unescaped')\n\nmodule.exports = pino\n\nconst _console = pfGlobalThisOrFallback().console || {}\nconst stdSerializers = {\n  mapHttpRequest: mock,\n  mapHttpResponse: mock,\n  wrapRequestSerializer: passthrough,\n  wrapResponseSerializer: passthrough,\n  wrapErrorSerializer: passthrough,\n  req: mock,\n  res: mock,\n  err: asErrValue\n}\n\nfunction shouldSerialize (serialize, serializers) {\n  if (Array.isArray(serialize)) {\n    const hasToFilter = serialize.filter(function (k) {\n      return k !== '!stdSerializers.err'\n    })\n    return hasToFilter\n  } else if (serialize === true) {\n    return Object.keys(serializers)\n  }\n\n  return false\n}\n\nfunction pino (opts) {\n  opts = opts || {}\n  opts.browser = opts.browser || {}\n\n  const transmit = opts.browser.transmit\n  if (transmit && typeof transmit.send !== 'function') { throw Error('pino: transmit option must have a send function') }\n\n  const proto = opts.browser.write || _console\n  if (opts.browser.write) opts.browser.asObject = true\n  const serializers = opts.serializers || {}\n  const serialize = shouldSerialize(opts.browser.serialize, serializers)\n  let stdErrSerialize = opts.browser.serialize\n\n  if (\n    Array.isArray(opts.browser.serialize) &&\n    opts.browser.serialize.indexOf('!stdSerializers.err') > -1\n  ) stdErrSerialize = false\n\n  const levels = ['error', 'fatal', 'warn', 'info', 'debug', 'trace']\n\n  if (typeof proto === 'function') {\n    proto.error = proto.fatal = proto.warn =\n    proto.info = proto.debug = proto.trace = proto\n  }\n  if (opts.enabled === false) opts.level = 'silent'\n  const level = opts.level || 'info'\n  const logger = Object.create(proto)\n  if (!logger.log) logger.log = noop\n\n  Object.defineProperty(logger, 'levelVal', {\n    get: getLevelVal\n  })\n  Object.defineProperty(logger, 'level', {\n    get: getLevel,\n    set: setLevel\n  })\n\n  const setOpts = {\n    transmit,\n    serialize,\n    asObject: opts.browser.asObject,\n    levels,\n    timestamp: getTimeFunction(opts)\n  }\n  logger.levels = pino.levels\n  logger.level = level\n\n  logger.setMaxListeners = logger.getMaxListeners =\n  logger.emit = logger.addListener = logger.on =\n  logger.prependListener = logger.once =\n  logger.prependOnceListener = logger.removeListener =\n  logger.removeAllListeners = logger.listeners =\n  logger.listenerCount = logger.eventNames =\n  logger.write = logger.flush = noop\n  logger.serializers = serializers\n  logger._serialize = serialize\n  logger._stdErrSerialize = stdErrSerialize\n  logger.child = child\n\n  if (transmit) logger._logEvent = createLogEventShape()\n\n  function getLevelVal () {\n    return this.level === 'silent'\n      ? Infinity\n      : this.levels.values[this.level]\n  }\n\n  function getLevel () {\n    return this._level\n  }\n  function setLevel (level) {\n    if (level !== 'silent' && !this.levels.values[level]) {\n      throw Error('unknown level ' + level)\n    }\n    this._level = level\n\n    set(setOpts, logger, 'error', 'log') // <-- must stay first\n    set(setOpts, logger, 'fatal', 'error')\n    set(setOpts, logger, 'warn', 'error')\n    set(setOpts, logger, 'info', 'log')\n    set(setOpts, logger, 'debug', 'log')\n    set(setOpts, logger, 'trace', 'log')\n  }\n\n  function child (bindings, childOptions) {\n    if (!bindings) {\n      throw new Error('missing bindings for child Pino')\n    }\n    childOptions = childOptions || {}\n    if (serialize && bindings.serializers) {\n      childOptions.serializers = bindings.serializers\n    }\n    const childOptionsSerializers = childOptions.serializers\n    if (serialize && childOptionsSerializers) {\n      var childSerializers = Object.assign({}, serializers, childOptionsSerializers)\n      var childSerialize = opts.browser.serialize === true\n        ? Object.keys(childSerializers)\n        : serialize\n      delete bindings.serializers\n      applySerializers([bindings], childSerialize, childSerializers, this._stdErrSerialize)\n    }\n    function Child (parent) {\n      this._childLevel = (parent._childLevel | 0) + 1\n      this.error = bind(parent, bindings, 'error')\n      this.fatal = bind(parent, bindings, 'fatal')\n      this.warn = bind(parent, bindings, 'warn')\n      this.info = bind(parent, bindings, 'info')\n      this.debug = bind(parent, bindings, 'debug')\n      this.trace = bind(parent, bindings, 'trace')\n      if (childSerializers) {\n        this.serializers = childSerializers\n        this._serialize = childSerialize\n      }\n      if (transmit) {\n        this._logEvent = createLogEventShape(\n          [].concat(parent._logEvent.bindings, bindings)\n        )\n      }\n    }\n    Child.prototype = this\n    return new Child(this)\n  }\n  return logger\n}\n\npino.levels = {\n  values: {\n    fatal: 60,\n    error: 50,\n    warn: 40,\n    info: 30,\n    debug: 20,\n    trace: 10\n  },\n  labels: {\n    10: 'trace',\n    20: 'debug',\n    30: 'info',\n    40: 'warn',\n    50: 'error',\n    60: 'fatal'\n  }\n}\n\npino.stdSerializers = stdSerializers\npino.stdTimeFunctions = Object.assign({}, { nullTime, epochTime, unixTime, isoTime })\n\nfunction set (opts, logger, level, fallback) {\n  const proto = Object.getPrototypeOf(logger)\n  logger[level] = logger.levelVal > logger.levels.values[level]\n    ? noop\n    : (proto[level] ? proto[level] : (_console[level] || _console[fallback] || noop))\n\n  wrap(opts, logger, level)\n}\n\nfunction wrap (opts, logger, level) {\n  if (!opts.transmit && logger[level] === noop) return\n\n  logger[level] = (function (write) {\n    return function LOG () {\n      const ts = opts.timestamp()\n      const args = new Array(arguments.length)\n      const proto = (Object.getPrototypeOf && Object.getPrototypeOf(this) === _console) ? _console : this\n      for (var i = 0; i < args.length; i++) args[i] = arguments[i]\n\n      if (opts.serialize && !opts.asObject) {\n        applySerializers(args, this._serialize, this.serializers, this._stdErrSerialize)\n      }\n      if (opts.asObject) write.call(proto, asObject(this, level, args, ts))\n      else write.apply(proto, args)\n\n      if (opts.transmit) {\n        const transmitLevel = opts.transmit.level || logger.level\n        const transmitValue = pino.levels.values[transmitLevel]\n        const methodValue = pino.levels.values[level]\n        if (methodValue < transmitValue) return\n        transmit(this, {\n          ts,\n          methodLevel: level,\n          methodValue,\n          transmitLevel,\n          transmitValue: pino.levels.values[opts.transmit.level || logger.level],\n          send: opts.transmit.send,\n          val: logger.levelVal\n        }, args)\n      }\n    }\n  })(logger[level])\n}\n\nfunction asObject (logger, level, args, ts) {\n  if (logger._serialize) applySerializers(args, logger._serialize, logger.serializers, logger._stdErrSerialize)\n  const argsCloned = args.slice()\n  let msg = argsCloned[0]\n  const o = {}\n  if (ts) {\n    o.time = ts\n  }\n  o.level = pino.levels.values[level]\n  let lvl = (logger._childLevel | 0) + 1\n  if (lvl < 1) lvl = 1\n  // deliberate, catching objects, arrays\n  if (msg !== null && typeof msg === 'object') {\n    while (lvl-- && typeof argsCloned[0] === 'object') {\n      Object.assign(o, argsCloned.shift())\n    }\n    msg = argsCloned.length ? format(argsCloned.shift(), argsCloned) : undefined\n  } else if (typeof msg === 'string') msg = format(argsCloned.shift(), argsCloned)\n  if (msg !== undefined) o.msg = msg\n  return o\n}\n\nfunction applySerializers (args, serialize, serializers, stdErrSerialize) {\n  for (const i in args) {\n    if (stdErrSerialize && args[i] instanceof Error) {\n      args[i] = pino.stdSerializers.err(args[i])\n    } else if (typeof args[i] === 'object' && !Array.isArray(args[i])) {\n      for (const k in args[i]) {\n        if (serialize && serialize.indexOf(k) > -1 && k in serializers) {\n          args[i][k] = serializers[k](args[i][k])\n        }\n      }\n    }\n  }\n}\n\nfunction bind (parent, bindings, level) {\n  return function () {\n    const args = new Array(1 + arguments.length)\n    args[0] = bindings\n    for (var i = 1; i < args.length; i++) {\n      args[i] = arguments[i - 1]\n    }\n    return parent[level].apply(this, args)\n  }\n}\n\nfunction transmit (logger, opts, args) {\n  const send = opts.send\n  const ts = opts.ts\n  const methodLevel = opts.methodLevel\n  const methodValue = opts.methodValue\n  const val = opts.val\n  const bindings = logger._logEvent.bindings\n\n  applySerializers(\n    args,\n    logger._serialize || Object.keys(logger.serializers),\n    logger.serializers,\n    logger._stdErrSerialize === undefined ? true : logger._stdErrSerialize\n  )\n  logger._logEvent.ts = ts\n  logger._logEvent.messages = args.filter(function (arg) {\n    // bindings can only be objects, so reference equality check via indexOf is fine\n    return bindings.indexOf(arg) === -1\n  })\n\n  logger._logEvent.level.label = methodLevel\n  logger._logEvent.level.value = methodValue\n\n  send(methodLevel, logger._logEvent, val)\n\n  logger._logEvent = createLogEventShape(bindings)\n}\n\nfunction createLogEventShape (bindings) {\n  return {\n    ts: 0,\n    messages: [],\n    bindings: bindings || [],\n    level: { label: '', value: 0 }\n  }\n}\n\nfunction asErrValue (err) {\n  const obj = {\n    type: err.constructor.name,\n    msg: err.message,\n    stack: err.stack\n  }\n  for (const key in err) {\n    if (obj[key] === undefined) {\n      obj[key] = err[key]\n    }\n  }\n  return obj\n}\n\nfunction getTimeFunction (opts) {\n  if (typeof opts.timestamp === 'function') {\n    return opts.timestamp\n  }\n  if (opts.timestamp === false) {\n    return nullTime\n  }\n  return epochTime\n}\n\nfunction mock () { return {} }\nfunction passthrough (a) { return a }\nfunction noop () {}\n\nfunction nullTime () { return false }\nfunction epochTime () { return Date.now() }\nfunction unixTime () { return Math.round(Date.now() / 1000.0) }\nfunction isoTime () { return new Date(Date.now()).toISOString() } // using Date.now() for testability\n\n/* eslint-disable */\n/* istanbul ignore next */\nfunction pfGlobalThisOrFallback () {\n  function defd (o) { return typeof o !== 'undefined' && o }\n  try {\n    if (typeof globalThis !== 'undefined') return globalThis\n    Object.defineProperty(Object.prototype, 'globalThis', {\n      get: function () {\n        delete Object.prototype.globalThis\n        return (this.globalThis = this)\n      },\n      configurable: true\n    })\n    return globalThis\n  } catch (e) {\n    return defd(self) || defd(window) || defd(this) || {}\n  }\n}\n/* eslint-enable */\n","import pino from \"pino\";\r\n\r\nexport const logger = pino();\r\n","import { BasicAddNoteParams } from \"./anki/addNote\";\r\nimport { AnkiResponse } from \"./anki/response\";\r\n\r\nexport enum MessageType {\r\n  addNote,\r\n  addNoteResponse,\r\n}\r\n\r\nexport interface AddNoteMessage {\r\n  type: MessageType.addNote,\r\n  payload: BasicAddNoteParams,\r\n}\r\n\r\nexport interface AddNoteResponseMessage {\r\n  type: MessageType.addNoteResponse,\r\n  payload: AnkiResponse,\r\n}\r\n\r\nexport type Messsage =\r\n | AddNoteMessage\r\n | AddNoteResponseMessage\r\n;","import { addNote } from \"../anki\";\r\nimport { AnkiResponse } from \"../anki/response\";\r\nimport { logger } from \"../logger\";\r\nimport { AddNoteResponseMessage, MessageType, Messsage } from \"../messages\";\r\n\r\nchrome.runtime.onMessage.addListener(async (message: Messsage) => {\r\n  switch (message.type) {\r\n    case MessageType.addNote: {\r\n      const response = await addNote(message.payload);\r\n      const body: AnkiResponse = await response.json();\r\n\r\n      let notificationMessage = \"Note added\";\r\n      if (body.error !== null) {\r\n        notificationMessage = body.error;\r\n        logger.error(body.error);\r\n      }\r\n    \r\n      chrome.notifications.create(\"\", {\r\n        message: notificationMessage,\r\n        iconUrl: \"images/logo.png\",\r\n        title: \"Wiktionary ++\",\r\n        type: \"basic\",\r\n      });\r\n\r\n      chrome.tabs.query({ active: true, currentWindow: true }, (tabs)=> {\r\n        const [tab] = tabs;\r\n        if (tab === undefined) {\r\n          return;\r\n        }\r\n\r\n        const tabId = tab.id;\r\n        if (tabId === undefined) {\r\n          return;\r\n        }\r\n\r\n        chrome.tabs.sendMessage(tabId, {\r\n          type: MessageType.addNoteResponse,\r\n          payload: body,\r\n        } as AddNoteResponseMessage);  \r\n      });\r\n      break;\r\n    }\r\n    default:\r\n      logger.error(message, `Unexpected message type: ${message.type}`);\r\n  }\r\n});"],"names":["$169dda80f8949f85$export$e4a712fff93fb00f","$9e16048665645004$export$b255b5c1d435d5f8","front","back","deckName","note","modelName","fields","Front","Back","options","allowDuplicate","duplicateScope","duplicateScopeOptions","checkChildren","checkAllModels","tags","$9e16048665645004$export$79159e21a6bceab7","params","body","JSON","stringify","version","fetch","method","$546dc626102bcb5a$export$f424036cf10051f4","action","AddNote","$aef1cda73f563933$var$tryStringify","o","e","$aef1cda73f563933$exports","f","args","opts","ss","len","length","objects","Array","index","join","argLen","str","a","lastPos","flen","i","charCodeAt","slice","Number","Math","floor","undefined","type","name","String","$871afc82c02dcaae$exports","$871afc82c02dcaae$var$pino","$871afc82c02dcaae$var$_console","defd","globalThis","Object","defineProperty","prototype","get","this","configurable","self","window","$871afc82c02dcaae$var$pfGlobalThisOrFallback","console","$871afc82c02dcaae$var$stdSerializers","mapHttpRequest","$871afc82c02dcaae$var$mock","mapHttpResponse","wrapRequestSerializer","$871afc82c02dcaae$var$passthrough","wrapResponseSerializer","wrapErrorSerializer","req","res","err","obj","constructor","msg","message","stack","key","browser","transmit","send","Error","proto","write","asObject","serializers","serialize","isArray","filter","k","keys","$871afc82c02dcaae$var$shouldSerialize","stdErrSerialize","indexOf","error","fatal","warn","info","debug","trace","enabled","level","level1","logger","create","log","$871afc82c02dcaae$var$noop","Infinity","levels","values","_level","set","$871afc82c02dcaae$var$set","setOpts","timestamp","$871afc82c02dcaae$var$getTimeFunction","setMaxListeners","getMaxListeners","emit","addListener","on","prependListener","once","prependOnceListener","removeListener","removeAllListeners","listeners","listenerCount","eventNames","flush","_serialize","_stdErrSerialize","child","bindings","childOptions","childOptionsSerializers","childSerializers","assign","childSerialize","$871afc82c02dcaae$var$applySerializers","Child","parent","_childLevel","$871afc82c02dcaae$var$bind","_logEvent","$871afc82c02dcaae$var$createLogEventShape","concat","fallback","getPrototypeOf","levelVal","ts","arguments","call","$871afc82c02dcaae$var$asObject","apply","transmitLevel","transmitValue","methodValue","$871afc82c02dcaae$var$transmit","methodLevel","val","$871afc82c02dcaae$var$wrap","argsCloned","time","lvl","shift","stdSerializers","messages","arg","label","value","$871afc82c02dcaae$var$nullTime","$871afc82c02dcaae$var$epochTime","Date","now","labels","stdTimeFunctions","nullTime","epochTime","unixTime","round","isoTime","toISOString","$447b5a099742ba74$export$af88d00dbe7f521","$parcel$interopDefault","$89bfb1293656bf34$export$80edbf15fa61a4db","chrome","runtime","onMessage","async","addNote","response","payload","json","notificationMessage","notifications","iconUrl","title","tabs","query","active","currentWindow","tab","tabId","id","sendMessage","addNoteResponse"],"version":3,"file":"eventListener.js.map"}