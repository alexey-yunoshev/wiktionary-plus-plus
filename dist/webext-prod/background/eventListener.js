(()=>{function e(e){return e&&e.__esModule?e.default:e}let t;function r({front:e,back:t,deckName:r}){return{note:{deckName:r,modelName:"Basic",fields:{Front:e,Back:t},options:{allowDuplicate:!1,duplicateScope:"deck",duplicateScopeOptions:{deckName:null,checkChildren:!1,checkAllModels:!1}},tags:[]}}}function i(e){return function(e){const t=JSON.stringify({...e,version:6});return fetch("http://127.0.0.1:8765",{method:"POST",body:t})}({action:t.AddNote,params:r(e)})}!function(e){e.AddNote="addNote"}(t||(t={}));var n,s={};function o(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}s=function(e,t,r){var i=r&&r.stringify||o;if("object"==typeof e&&null!==e){var n=t.length+1;if(1===n)return e;var s=new Array(n);s[0]=i(e);for(var l=1;l<n;l++)s[l]=i(t[l]);return s.join(" ")}if("string"!=typeof e)return e;var a=t.length;if(0===a)return e;for(var c="",f=0,u=-1,d=e&&e.length||0,v=0;v<d;){if(37===e.charCodeAt(v)&&v+1<d){switch(u=u>-1?u:0,e.charCodeAt(v+1)){case 100:case 102:if(f>=a)break;if(null==t[f])break;u<v&&(c+=e.slice(u,v)),c+=Number(t[f]),u=v+2,v++;break;case 105:if(f>=a)break;if(null==t[f])break;u<v&&(c+=e.slice(u,v)),c+=Math.floor(Number(t[f])),u=v+2,v++;break;case 79:case 111:case 106:if(f>=a)break;if(void 0===t[f])break;u<v&&(c+=e.slice(u,v));var h=typeof t[f];if("string"===h){c+="'"+t[f]+"'",u=v+2,v++;break}if("function"===h){c+=t[f].name||"<anonymous>",u=v+2,v++;break}c+=i(t[f]),u=v+2,v++;break;case 115:if(f>=a)break;u<v&&(c+=e.slice(u,v)),c+=String(t[f]),u=v+2,v++;break;case 37:u<v&&(c+=e.slice(u,v)),c+="%",u=v+2,v++,f--}++f}++v}if(-1===u)return e;u<d&&(c+=e.slice(u));return c},n=c;const l=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},a={mapHttpRequest:p,mapHttpResponse:p,wrapRequestSerializer:m,wrapResponseSerializer:m,wrapErrorSerializer:m,req:p,res:p,err:function(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function c(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||l;e.browser.write&&(e.browser.asObject=!0);const i=e.serializers||{},n=function(e,t){if(Array.isArray(e))return e.filter((function(e){return"!stdSerializers.err"!==e}));return!0===e&&Object.keys(t)}(e.browser.serialize,i);let s=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");const o=e.level||"info",a=Object.create(r);a.log||(a.log=y),Object.defineProperty(a,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(a,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,f(u,a,"error","log"),f(u,a,"fatal","error"),f(u,a,"warn","error"),f(u,a,"info","log"),f(u,a,"debug","log"),f(u,a,"trace","log")}});const u={transmit:t,serialize:n,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:g(e)};return a.levels=c.levels,a.level=o,a.setMaxListeners=a.getMaxListeners=a.emit=a.addListener=a.on=a.prependListener=a.once=a.prependOnceListener=a.removeListener=a.removeAllListeners=a.listeners=a.listenerCount=a.eventNames=a.write=a.flush=y,a.serializers=i,a._serialize=n,a._stdErrSerialize=s,a.child=function(r,s){if(!r)throw new Error("missing bindings for child Pino");s=s||{},n&&r.serializers&&(s.serializers=r.serializers);const o=s.serializers;if(n&&o){var l=Object.assign({},i,o),a=!0===e.browser.serialize?Object.keys(l):n;delete r.serializers,d([r],a,l,this._stdErrSerialize)}function c(e){this._childLevel=1+(0|e._childLevel),this.error=v(e,r,"error"),this.fatal=v(e,r,"fatal"),this.warn=v(e,r,"warn"),this.info=v(e,r,"info"),this.debug=v(e,r,"debug"),this.trace=v(e,r,"trace"),l&&(this.serializers=l,this._serialize=a),t&&(this._logEvent=b([].concat(e._logEvent.bindings,r)))}return c.prototype=this,new c(this)},t&&(a._logEvent=b()),a}function f(e,t,r,i){const n=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?y:n[r]?n[r]:l[r]||l[i]||y,function(e,t,r){if(!e.transmit&&t[r]===y)return;t[r]=(i=t[r],function(){const n=e.timestamp(),s=new Array(arguments.length),o=Object.getPrototypeOf&&Object.getPrototypeOf(this)===l?l:this;for(var a=0;a<s.length;a++)s[a]=arguments[a];if(e.serialize&&!e.asObject&&d(s,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?i.call(o,u(this,r,s,n)):i.apply(o,s),e.transmit){const i=e.transmit.level||t.level,o=c.levels.values[i],l=c.levels.values[r];if(l<o)return;h(this,{ts:n,methodLevel:r,methodValue:l,transmitLevel:i,transmitValue:c.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},s)}});var i}(e,t,r)}function u(e,t,r,i){e._serialize&&d(r,e._serialize,e.serializers,e._stdErrSerialize);const n=r.slice();let o=n[0];const l={};i&&(l.time=i),l.level=c.levels.values[t];let a=1+(0|e._childLevel);if(a<1&&(a=1),null!==o&&"object"==typeof o){for(;a--&&"object"==typeof n[0];)Object.assign(l,n.shift());o=n.length?s(n.shift(),n):void 0}else"string"==typeof o&&(o=s(n.shift(),n));return void 0!==o&&(l.msg=o),l}function d(e,t,r,i){for(const n in e)if(i&&e[n]instanceof Error)e[n]=c.stdSerializers.err(e[n]);else if("object"==typeof e[n]&&!Array.isArray(e[n]))for(const i in e[n])t&&t.indexOf(i)>-1&&i in r&&(e[n][i]=r[i](e[n][i]))}function v(e,t,r){return function(){const i=new Array(1+arguments.length);i[0]=t;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return e[r].apply(this,i)}}function h(e,t,r){const i=t.send,n=t.ts,s=t.methodLevel,o=t.methodValue,l=t.val,a=e._logEvent.bindings;d(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter((function(e){return-1===a.indexOf(e)})),e._logEvent.level.label=s,e._logEvent.level.value=o,i(s,e._logEvent,l),e._logEvent=b(a)}function b(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function g(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?w:z}function p(){return{}}function m(e){return e}function y(){}function w(){return!1}function z(){return Date.now()}c.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},c.stdSerializers=a,c.stdTimeFunctions=Object.assign({},{nullTime:w,epochTime:z,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}});const O=e(n)();let k;!function(e){e[e.addNote=0]="addNote",e[e.addNoteResponse=1]="addNoteResponse"}(k||(k={})),chrome.runtime.onMessage.addListener((async e=>{switch(e.type){case k.addNote:{const t=await i(e.payload),r=await t.json();let n="Note added";null!==r.error&&(n=r.error,O.error(r.error)),chrome.notifications.create("",{message:n,iconUrl:"images/logo.png",title:"Wiktionary ++",type:"basic"}),chrome.tabs.query({active:!0,currentWindow:!0},(e=>{const[t]=e;if(void 0===t)return;const i=t.id;void 0!==i&&chrome.tabs.sendMessage(i,{type:k.addNoteResponse,payload:r})}));break}default:O.error(e,`Unexpected message type: ${e.type}`)}}))})();
//# sourceMappingURL=eventListener.js.map
